<%- include("faculty-partials/faculty-header.ejs") -%>

<main class="main-dashboard pt-0">
    <div class="container-fluid">
        <div class="row">

            <!-- Error Handling -->
            <div class="row">
                <div class="col-md-12">
                    <% if (typeof error !== 'undefined' ) { %>
                        <% if (error.code === 'ERROR') { %>
                            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                                <span><%= error.msg %></span>
                                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                            </div>
                        <% } %>
                    <% } %>
                </div>
            </div>
            <!-- /Error Handling -->

            <!-- ADD Courses -->
            <div class="row">
                <div class="col mt-2">
                    <% if (typeof foundFaculty !== 'undefined' ) { %>
                        <% facultyActive = foundFaculty.semesterStatus %>
                    <% } %>
                    <%- include("faculty-btn/faculty-courses-btn/faculty-course-add.ejs", {facultyActive: facultyActive}) -%>
                </div>
            </div>
            <!-- /ADD Courses -->

            <% if (typeof foundSemesters !== 'undefined') { %>
                <% foundSemesters.forEach((semester) => { %>
                    <div class="col-12 mt-2">
                        <div class="card">
                            <div class="card-header fw-bold text-center"><%= semester.semesterName %></div>
                            <div class="card-body">
                                <table class="table table-hover table-striped">

                                    <!-- Table Header -->
                                    <thead>
                                        <tr>
                                            <th>Course Code</th>
                                            <th>Course Details</th>
                                            <th style="width: 0">Delete</th>
                                        </tr>
                                    </thead>
                                    <!-- /Table Header -->

                                    <!-- Table Body -->
                                    <tbody>
                                        <% semester.semesterDetails.forEach((details)=> { %>
                                            <tr>
                                                <td><%= details.courseCode %></td>
                                                <td><%= details.courseDetails %></td>
                                                <td>
                                                    <!-- DELETE Course -->
                                                    <% const info = [semester, details]%>
                                                    <%- include("faculty-btn/faculty-courses-btn/faculty-course-delete.ejs", {info: info}) -%>
                                                    <!-- /DELETE Course -->
                                                </td>
                                            </tr>
                                        <% }); %>
                                    </tbody>
                                    <!-- /Table Body -->
                                </table>
                            </div>
                        </div>
                    </div>
                <% }); %>
            <% } %>
        </div>
    </div>
</main>

<%- include("faculty-partials/faculty-footer.ejs") -%>